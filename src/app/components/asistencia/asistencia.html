<div class="container mt-4">
  <img src="/logoucentral.png" alt="" srcset="" style="width: 25%;">
  <h3 class="text-center mb-4">ðŸ“‹ Registro de Asistencia</h3>

  <div class="card shadow-sm p-3 mb-4">
    <div class="row g-2 align-items-end">
      <div class="col-md-4">
        <label class="form-label fw-bold">Fecha</label>
        <input type="date" [(ngModel)]="fechaFiltro" class="form-control">
      </div>

      <div class="col-md-4">
        <label class="form-label fw-bold">ID Estudiante</label>
        <input type="number" [(ngModel)]="estudianteId" class="form-control" placeholder="Ej. 1">
      </div>

      <div class="col-md-4 text-md-end">
        <button class="btn btn-primary me-2" (click)="filtrar()">Filtrar</button>
        <button class="btn btn-secondary" (click)="limpiar()">Limpiar</button>
      </div>
    </div>
  </div>

  <div *ngIf="cargando" class="text-center">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-2">Cargando datos...</p>
  </div>

  <table *ngIf="!cargando && asistencias.length > 0" class="table table-striped text-center">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Fecha</th>
        <th>AsistiÃ³</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let a of asistencias">
        <td>{{ a.id }}</td>
        <td>{{ a.Estudiante?.nombre }}</td>
        <td>{{ a.fecha }}</td>
        <td>
          <span [class.text-success]="a.asistio" [class.text-danger]="!a.asistio">
            {{ a.asistio ? 'SÃ­' : 'No' }}
          </span>
        </td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="!cargando && asistencias.length === 0" class="text-center mt-3 text-muted">
    No se encontraron registros.
  </p>
</div>